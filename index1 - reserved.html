<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100%; background-color: white; }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script src="js/threex.dynamictexture.js"></script>
		<script>

			container = document.createElement( 'div' );
			document.body.appendChild( container );

			var info = document.createElement( 'div' );
			info.style.position = 'absolute';
			info.style.top = '10px';
			info.style.width = '100%';
			info.style.textAlign = 'center';
			info.innerHTML = 'Drag to spin the cube';
			container.appendChild( info );

			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			renderer.setClearColor (0xffffff, 1);
			document.body.appendChild( renderer.domElement );

			// dynamic text as metirial////////////
			var dynamicTexture	= new THREEx.DynamicTexture(512,512)
			dynamicTexture.context.font	= "bolder 2px Verdana";
			dynamicTexture.texture.anisotropy = renderer.getMaxAnisotropy()

			var text = "What is Lorem Ipsum Lorem Ipsum is simply dummy text <a> link <a/>of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic "

			var btnText = "Click";

			dynamicTexture.clear('cyan');
			//.drawText(text, 32, 256, 'red')
			dynamicTexture.drawTextCooked({
				text		: text,
				font	    : "bolder 12px Verdana"
			});
			///////////////////////////////////////

			// dynamic text as metirial////////////
			var dynamicTexture1	= new THREEx.DynamicTexture(512,512)
			dynamicTexture1.context.font	= "bolder 2px Verdana";
			dynamicTexture1.texture.anisotropy = renderer.getMaxAnisotropy()

			var btnText = "Click";

			dynamicTexture1.clear('cyan');
			//.drawText(text, 32, 256, 'red')
			dynamicTexture1.drawTextCooked({
				text		: btnText,
				font	    : "125px Verdana"
			});

			var geometry = new THREE.BoxGeometry( 3, 3, 3 );

			var geometry1 = new THREE.BoxGeometry( 0.7, 0.3, 1 );
			//var material = new THREE.MeshBasicMaterial( { color: 0xe0e0e0 } );
			var material = new THREE.MeshFaceMaterial([
			    new THREE.MeshBasicMaterial({
			        color: 0x005445
			    }),
			    new THREE.MeshBasicMaterial({
			        color: 0x953734
			    }),
			    new THREE.MeshBasicMaterial({
			        color: 0x366092,
			    }),
			    new THREE.MeshBasicMaterial({
			        color: 0xf79646
			    }),
			    new THREE.MeshBasicMaterial({
			        color: 0x318598
			    }),
			    new THREE.MeshBasicMaterial({
					map	: dynamicTexture.texture
				})
			]);

			var material2 = new THREE.MeshFaceMaterial([
			    new THREE.MeshBasicMaterial({
			        color: 0xDAF7A6
			    }),
			    new THREE.MeshBasicMaterial({
			        color: 0xCCAFA9
			    }),
			    new THREE.MeshBasicMaterial({
			        color: 0x0922AE,
			    }),
			    new THREE.MeshBasicMaterial({
			        color: 0xCCAFA9
			    }),
			    new THREE.MeshBasicMaterial({
			    	map	: dynamicTexture1.texture
			    	//map: THREE.ImageUtils.loadTexture( 'image/click.png' )
			        
			    }),
			    new THREE.MeshBasicMaterial({
					color: 0x953734
				})
			]);


			var cube = new THREE.Mesh( geometry, material );
			cube.name = "cube";

			var btn = new THREE.Mesh( geometry1, material2 );
			btn.name = "button";

			btn.position.set (-1,-1.3,1.6)
			cube.add(btn);

			

			scene.add( cube );

			

			camera.position.z = 5;

			var previousMousePosition = {
			    x: 0,
			    y: 0
			};

			var raycaster = new THREE.Raycaster();
			var mouse = new THREE.Vector2();

			var mouseX = 0;
        	var mouseY = 0;

        	var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;

			document.addEventListener( 'mousedown', onDocumentMouseDown, false );


			function onDocumentMouseDown( event ) {

				event.preventDefault();

				document.addEventListener( 'mousemove', onDocumentMouseMove, false );
				document.addEventListener( 'mouseup', onDocumentMouseUp, false );
				mouseX = event.clientX;
        		mouseY = event.clientY;
				//document.addEventListener( 'mouseout', onDocumentMouseOut, false );

				// mouseXOnMouseDown = event.clientX - windowHalfX;
				// targetRotationOnMouseDown = targetRotation;

			}

			function onDocumentMouseUp( event ) {

				document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
				document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
				//document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

			}

			function onDocumentMouseMove( event ) {
				// var deltaMove = {
			 //        x: event.offsetX-previousMousePosition.x,
			 //        y: event.offsetY-previousMousePosition.y
			 //    };

			            
		  //       var deltaRotationQuaternion = new THREE.Quaternion()
		  //           .setFromEuler(new THREE.Euler(
		  //               toRadians(deltaMove.y * 1),
		  //               toRadians(deltaMove.x * 1),
		  //               0,
		  //               'XYZ'
		  //           ));
		        
		  //       cube.quaternion.multiplyQuaternions(deltaRotationQuaternion, cube.quaternion);
			    
			    
			 //    previousMousePosition = {
			 //        x: event.offsetX,
			 //        y: event.offsetY
			 //    };

			 //    mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
				// mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
				var deltaX = event.clientX - mouseX,
	            deltaY = event.clientY - mouseY;
		        mouseX = event.clientX;
		        mouseY = event.clientY;
		        rotateScene(deltaX, deltaY);

			}
			
			function toRadians(angle) {
				return angle * (Math.PI / 180);
			}

		    function rotateScene(deltaX, deltaY) {
			    scene.rotation.y += deltaX / 100;
			    scene.rotation.x += deltaY / 100;
			}

			function render() {
				requestAnimationFrame( render );

				// update the picking ray with the camera and mouse position
				raycaster.setFromCamera( mouse, camera );

				// calculate objects intersecting the picking ray
				var intersects = raycaster.intersectObjects( scene.children[0].children );

				for ( var i = 0; i < intersects.length; i++ ) {

					//intersects[ i ].object.material.color.set( 0xff0000 );
					// console.log("name-->"+intersects[ i ].object.children);
					if(intersects[ i ].object.name == "button"){
						// window.open("https://www.w3schools.com","_self");
					}

				}
				// cube.rotation.x += 0.0125;
				// cube.rotation.y += 0.0125;
				renderer.render( scene, camera );
			}
			render();

		</script>
	</body>
</html>